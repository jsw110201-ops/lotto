<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>로또 번호 추첨기</title>
<style>
  body {
    font-family: Arial, sans-serif;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    height:100vh;
    margin:0;
    background: #111;
    color:white;
    overflow:hidden;
  }
  h1 {
    font-size:28px;
    color:#ffe138;
    margin-bottom:20px;
    text-align:center;
  }
  .numbers {
    display:flex;
    gap:10px;
    margin-bottom:20px;
    position:relative;
    z-index:2;
  }
  .number {
    width:50px;
    height:50px;
    border-radius:50%;
    background:#0dc2ff;
    display:flex;
    justify-content:center;
    align-items:center;
    font-weight:bold;
    font-size:20px;
    color:#111;
  }
  .message {
    font-size:20px;
    margin-top:10px;
    text-align:center;
    min-height:24px;
    position:relative;
    z-index:2;
  }
  canvas {
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    pointer-events:none;
    z-index:1;
  }
</style>
</head>
<body>

<h1>인생 여전 말고 인생 역전</h1>
<div class="numbers" id="numbers"></div>
<div class="message" id="message"></div>
<canvas id="fireworks"></canvas>

<script>
// --------------------- 로또 번호 추첨 ---------------------
function drawLotto(){
  const lottoNumbers = [];
  while(lottoNumbers.length < 6){
    const num = Math.floor(Math.random() * 45) + 1;
    if(!lottoNumbers.includes(num)) lottoNumbers.push(num);
  }
  lottoNumbers.sort((a,b)=>a-b);

  const numbersDiv = document.getElementById('numbers');
  numbersDiv.innerHTML = '';
  lottoNumbers.forEach(num=>{
    const span = document.createElement('div');
    span.className = 'number';
    span.innerText = num;
    numbersDiv.appendChild(span);
  });

  showRandomMessage();
  launchFireworks();
}

// --------------------- 랜덤 응원 문구 ---------------------
const messages = [];
for(let i=0;i<100;i++){
  messages.push("행운 문구 #" + (i+1));
}

function showRandomMessage(){
  const msgEl = document.getElementById('message');
  const randomIndex = Math.floor(Math.random() * messages.length);
  msgEl.innerText = messages[randomIndex];
}

// --------------------- 폭죽 ---------------------
const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];

function launchFireworks(){
  for(let i=0;i<100;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height, // 전체 높이
      vx: (Math.random()-0.5)*6,
      vy: (Math.random()-0.5)*6,
      alpha:1,
      color: `hsl(${Math.random()*360},100%,50%)`,
      life: 60 + Math.random()*30
    });
  }
}

function updateFireworks(){
  ctx.fillStyle = "rgba(0,0,0,0.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  for(let i=particles.length-1;i>=0;i--){
    const p = particles[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.05; // 중력
    p.life--;
    p.alpha = p.life/60;
    ctx.fillStyle = p.color;
    ctx.globalAlpha = p.alpha;
    ctx.beginPath();
    ctx.arc(p.x,p.y,3,0,Math.PI*2);
    ctx.fill();
    if(p.life<=0) particles.splice(i,1);
  }
  ctx.globalAlpha=1;
  requestAnimationFrame(updateFireworks);
}
updateFireworks();

// --------------------- 터치/클릭 이벤트 ---------------------
function handleClick(){
  drawLotto();
}
document.body.addEventListener('click', handleClick);
document.body.addEventListener('touchstart', e=>{
  e.preventDefault();
  handleClick();
},{passive:false});

// --------------------- 리사이즈 대응 ---------------------
window.addEventListener('resize', ()=>{
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>

</body>
</html>
